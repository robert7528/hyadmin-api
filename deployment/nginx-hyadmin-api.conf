# HySP Admin API - Nginx Location Configuration
#
# 安裝方式：
#   sudo cp nginx-hyadmin-api.conf /etc/nginx/conf.d/service/hyadmin-api.conf
#   sudo nginx -t
#   sudo systemctl reload nginx
#
# 存取路徑：https://your-domain/hyadmin-api/
# hyadmin-ui 的 NEXT_PUBLIC_API_URL 應設為：https://your-domain/hyadmin-api

# HySP Admin API (Go + Gin, port 8080)
location /hyadmin-api/ {
    # trailing slash 剝離前綴：
    #   /hyadmin-api/api/v1/health → http://127.0.0.1:8080/api/v1/health
    proxy_pass http://127.0.0.1:8080/;
    proxy_http_version 1.1;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    proxy_connect_timeout 60;
    proxy_send_timeout 60;
    proxy_read_timeout 60;
}
